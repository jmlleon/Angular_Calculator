<title-bar [title]="'Modulo Usuarios'" [info]="'Listado de Usuarios'"></title-bar>

<operation-bar [addUrl]="'admin/useradd'" [disableFoward]="true" [backUrl]="'admin'"></operation-bar>

<div class="flex justify-center items-center min-h-screen" *ngIf="userLoading"><!--spinner-container-->
    <mat-progress-spinner mode="determinate" color="warn"></mat-progress-spinner>
    <mat-spinner></mat-spinner>
</div>

<div class="flex flex-col justify-center items-center mt-4 p-4">


    <table mat-table [dataSource]="dataSource"
        class="bg-indigo-500 shadow-2xl shadow-indigo-500/50 w-[70%] border-2 border-white" *ngIf="!userLoading">
        
        <ng-container matColumnDef="actions">
            <th colspan="2" mat-header-cell *matHeaderCellDef>Acciones</th> 

        </ng-container>

        <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef>Editar</th>
            <td mat-cell *matCellDef="let user">
                <button mat-icon-button (click)="Edit(user)">
                    <fa-icon [icon]="faEdit"></fa-icon>
                </button>

            </td>

        </ng-container>
        <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef>Eliminar</th>
            <!--Pregunatr aqui por el Cargo del Usuario*****************************-->
            <td mat-cell *matCellDef="let user">

                <button mat-icon-button [color]="user.estado==='ACTIVO' ? 'warn':'primary'" (click)="Delete(user)">
                    <fa-icon [icon]="user.estado==='ACTIVO' ? faTrash : faCheck"></fa-icon>
                </button>
                <!--
                    color="warn"[disabled]="!CheckUserCanDeleteMPA(pedido.creadoPor)
                [disabled]="user.estado==='INACTIVO'"
                -->              
            </td>

        </ng-container>

        <!--"nombre", "appelidos", "idPerfil, passwd, login, fecha, estado, descripcionPerfil"-->

        <ng-container matColumnDef="userId">
            <th mat-header-cell *matHeaderCellDef>IdUsuario</th>
            <td mat-cell *matCellDef="let user">{{user.idUsuario}}</td>
        </ng-container>
        <ng-container matColumnDef="nombre">
            <th mat-header-cell *matHeaderCellDef>Nombre</th>
            <td mat-cell *matCellDef="let user">{{user.nombre}}</td>
        </ng-container>
        <ng-container matColumnDef="apellidos">
            <th mat-header-cell *matHeaderCellDef>Apellidos</th>
            <td mat-cell *matCellDef="let user">{{user.apellidos}}</td>
        </ng-container>
        <ng-container matColumnDef="idPerfil">
            <th mat-header-cell *matHeaderCellDef>IdPerfil</th>
            <td mat-cell *matCellDef="let user">{{user.idPerfil}}</td>
        </ng-container>
        <ng-container matColumnDef="login">
            <th mat-header-cell *matHeaderCellDef>login</th>
            <td mat-cell *matCellDef="let user">{{user.login}}</td>
        </ng-container>
        <ng-container matColumnDef="fecha">
            <th mat-header-cell *matHeaderCellDef>Fecha</th>
            <td mat-cell *matCellDef="let user">{{user.fecha | date:'dd-MM-YYYY'}}</td>
        </ng-container>
        <ng-container matColumnDef="estado">
            <th mat-header-cell *matHeaderCellDef>Estado</th>
            <td mat-cell *matCellDef="let user">{{user.estado}}</td>
        </ng-container>
        <ng-container matColumnDef="descripcionPerfil">
            <th mat-header-cell *matHeaderCellDef>Perfil</th>
            <td mat-cell *matCellDef="let user">{{user.descripcionPerfil}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsHeader"></tr>
        <tr mat-row *matRowDef="let row; columns:displayedColumns;"></tr>

    </table>

    <mat-paginator class="bg-indigo-600 shadow-2xl shadow-indigo-700/50 w-[70%] border-2 border-white" [length]="5"
        [pageSize]="5" [pageSizeOptions]="[5,10]" [hidden]="userLoading"></mat-paginator>
   
</div>